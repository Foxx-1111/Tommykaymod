### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_POLITICAL_CHARACTER}
### search_filters = {FOCUS_FILTER_MILITARY_CHARACTER}

### COPY PASTE TEMPLATE
###focus = {
###		id = TAG_focus_title
###		icon = GFX_focus_PLACEHOLDER
###		prerequisite = { focus = TAG_focus_title }
###		x = 0
###		y = 0
###		relative_position_id = TAG_focus_title
###		cost = 10
###		mutually_exclusive = { focus = TAG_focus_title }
###		
###		available = {
###
###		}
###
###		bypass = {
###
###		}
###
###		allow_branch = {
###
###		}
###
###		ai_will_do = {
###			factor = 0
###		}
###
###		search_filters = {
###
###		}
###
###		completion_reward = {
###
###		}
###	}

focus_tree = {
	id = persian_focus_tree
	
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = PER
		} 
	}

	default = no

	continuous_focus_position = { x = 200 y = 2400 }

	initial_show_position = {
		x = 25
		y = 0
	}

	#################################
	###### INDUSTRIAL BRANCH ########
	#################################

	focus = { #INDUSTRIAL
		id = PER_modernizing_iran
		icon = GFX_focus_PER_modernizing_iran
		x = 50
		y = 0
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_modernizing_iran_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_adult_literacy
		icon = GFX_focus_generic_university_1
		prerequisite = { focus = PER_modernizing_iran }
		x = -12
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_adult_literacy_idea
				days = 730
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_national_museum
		icon = GFX_focus_PER_national_museum
		prerequisite = { focus = PER_adult_literacy }
		x = 0
		y = 1
		relative_position_id = PER_adult_literacy
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = PER_andre_godard

			custom_effect_tooltip = CHL_skip_one_line_tt

			266 = { #Tehran
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_university_of_isfahan
		icon = GFX_focus_PER_university_of_isfahan
		prerequisite = { focus = PER_national_museum }
		x = -1
		y = 1
		relative_position_id = PER_national_museum
		mutually_exclusive = { focus = PER_shiraz_university }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_university_of_isfahan_bonus
			bonus = 0.5
			uses = 2
			category = support_tech
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_shiraz_university
		icon = GFX_focus_PER_shiraz_university
		prerequisite = { focus = PER_national_museum }
		x = 1
		y = 1
		relative_position_id = PER_national_museum
		mutually_exclusive = { focus = PER_university_of_isfahan }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_shiraz_university_bonus
			bonus = 0.5
			uses = 2
			category = electronics
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_educational_reforms
		icon = GFX_focus_research
		prerequisite = { focus = PER_university_of_isfahan focus = PER_shiraz_university }
		x = 1
		y = 1
		relative_position_id = PER_university_of_isfahan
		cost = 10

		available = {
			num_of_owned_factories > 40
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = { #INDUSTRIAL
		id = PER_trans_iranian_railway
		icon = GFX_focus_generic_railroad
		prerequisite = { focus = PER_metropolitan_iran }
		x = 0
		y = 2
		relative_position_id = PER_metropolitan_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_trans_iranian_railway_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_expand_tabriz_masshad
		icon = GFX_focus_PER_expand_tabriz_masshad
		prerequisite = { focus = PER_trans_iranian_railway }
		x = -2
		y = 1
		relative_position_id = PER_trans_iranian_railway
		cost = 3

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			build_railway = {
				path = { 5029 1957 5073 12748 12704 12818 10837 7969 4553 12793 1896 }
			}
			1000 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 1896
					instant_build = yes
				}
			}

			416 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 5029
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_expand_tehran_emam
		icon = GFX_focus_PER_expand_tehran_emam
		prerequisite = { focus = PER_trans_iranian_railway }
		x = 0
		y = 1
		relative_position_id = PER_trans_iranian_railway
		cost = 3

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			build_railway = {
				path = { 10837 10922 5067 2026 4928 5089 }
			}
			413 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 5089
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_expand_tehran_abbas
		icon = GFX_focus_PER_expand_tehran_abbas
		prerequisite = { focus = PER_trans_iranian_railway }
		x = 2
		y = 1
		relative_position_id = PER_trans_iranian_railway
		cost = 3

		ai_will_do = {
			factor = 15
		}

		search_filters = {
 			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			build_railway = {
				path = { 10837 10922 5067 8074 1963 8031 12780 12863 7982 }
			}
			412 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 7982
					instant_build = yes
				}
			}
		}
	}

	


	focus = { #INDUSTRIAL
		id = PER_feat_of_engineering
		icon = GFX_focus_PER_feat_of_engineering
		prerequisite = { focus = PER_expand_tehran_abbas focus = PER_expand_tehran_emam focus = PER_expand_tabriz_masshad }
		x = 0
		y = 1
		relative_position_id = PER_expand_tehran_emam
		cost = 10
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {

			create_railway_gun = {
				equipment = railway_gun_equipment
			}
			set_technology = {
				railway_gun = 1
			}
			custom_effect_tooltip = CHL_skip_one_line_tt

			add_tech_bonus = {
			name = PER_feat_of_engineering_bonus
			bonus = 1
			uses = 1
			category = train_tech
			}

		}
	}

	focus = { #INDUSTRIAL
		id = PER_white_revolution
		icon = GFX_focus_DEN_heavy_regulations
		prerequisite = { focus = PER_modernizing_iran }
		x = 3
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 5
		
		available = {
			#NOT = {
			#	has_completed_focus = PER_writing_on_wall
			#}

			num_of_owned_factories > 15
		}

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_white_revolution_idea
				days = 365
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			1000 = { #Tabriz
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #INDUSTRIAL
		id = PER_national_bank
		icon = GFX_focus_PER_national_bank
		prerequisite = { focus = PER_white_revolution }
		x = 0
		y = 1
		relative_position_id = PER_white_revolution
		cost = 10

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = available_industrial_concern
			show_ideas_tooltip = PER_national_bank_iran_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_price_stabilization
		icon = GFX_focus_mex_privatisation
		prerequisite = { focus = PER_national_bank }
		x = -1
		y = 1
		relative_position_id = PER_national_bank
		cost = 5
		

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_price_stabilization_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_abolish_feudalism
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = PER_national_bank }
		x = 1
		y = 1
		relative_position_id = PER_national_bank
		cost = 5
	

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			IF  = {
				limit = {
					has_idea = PER_rural_feudalism_ns
				}

				remove_ideas = PER_rural_feudalism_ns
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
			limit = {
				infrastructure < 5
				is_owned_and_controlled_by = ROOT
			}

			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
				}
			}

			random_core_state = {
			limit = {
				infrastructure < 5
				is_owned_and_controlled_by = ROOT
			}
			
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_women_vote
		icon = GFX_focus_generic_universal_suffrage #TODO_EILIDH fix this icon
		prerequisite = { focus = PER_price_stabilization focus = PER_abolish_feudalism }
		x = 0
		y = 1
		relative_position_id = PER_price_stabilization
		cost = 5

		available = {
			
		}

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			
			add_dynamic_modifier = {
				modifier = PER_women_workers
			}
			add_stability = -0.05
			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #INDUSTRIAL
		id = PER_food_for_all
		icon = GFX_focus_generic_agricultural_subsidies
		prerequisite = { focus = PER_price_stabilization focus = PER_abolish_feudalism }
		x = 0
		y = 1
		relative_position_id = PER_abolish_feudalism
		cost = 10

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			add_ideas = PER_food_for_all_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_rapid_industrialization
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = PER_modernizing_iran }
		x = 7
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			266 = { #Tehran
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_tehran_power_plant
		icon = GFX_focus_ARG_develop_the_electricity_sector
		prerequisite = { focus = PER_rapid_industrialization }
		x = 0
		y = 1
		relative_position_id = PER_rapid_industrialization
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {

			add_ideas = PER_tehran_power_grid_idea

			custom_effect_tooltip = CHL_skip_one_line_tt

			266 = { #Tehran
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_tech_bonus = {
			name = PER_tehran_power_grid_bonus
			bonus = 0.5
			uses = 2
			category = electronics
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_develop_cities
		icon = GFX_focus_generic_low_cost_housing
		prerequisite = { focus = PER_tehran_power_plant }
		x = 0
		y = 1
		relative_position_id = PER_tehran_power_plant
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			266 = { #Tehran
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

			419 = { #Tabriz
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_metropolitan_iran
		icon = GFX_focus_generic_industry_3
		prerequisite = { focus = PER_develop_cities }
		x = 0
		y = 1
		relative_position_id = PER_develop_cities
		cost = 5

		available = {
			num_of_owned_factories > 30
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_metropolitan_iran_idea
				days = 730
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_develop_oil_fields
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = PER_rapid_industrialization }
		x = 3
		y = 1
		relative_position_id = PER_rapid_industrialization
		cost = 10

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			421 = {
				add_resource = {
					type = oil
					amount = 16
				}	
			}

			413 = {
				add_resource = {
					type = oil
					amount = 10
				}	
			}

			412 = {
				add_resource = {
					type = oil
					amount = 14
				}	
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_form_oil_company
		icon = GFX_focus_PER_form_oil_company
		prerequisite = { focus = PER_develop_oil_fields }
		x = 0
		y = 1
		relative_position_id = PER_develop_oil_fields
		cost = 10

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = available_industrial_concern
			show_ideas_tooltip = PER_iranian_oil_company_idea
			IF = {
				limit = {
					has_idea = PER_anglo_iranian_oil_ns
				}
				remove_ideas = PER_anglo_iranian_oil_ns
			}
			#TODO_EILIDH: EVENT (add something that pisses england off lol)
			419 = { #Tabriz
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = synthetic_refinery
				level = 1
				instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_oil_baron
		icon = GFX_focus_PER_oil_baron
		prerequisite = { focus = PER_question_of_resources }
		x = 1
		y = 1
		relative_position_id = PER_question_of_resources
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_oil_baron_idea
			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #INDUSTRIAL
		id = PER_deal_with_eitc
		icon = GFX_focus_PLACEHOLDER
		prerequisite = { focus = PER_oil_baron }
		x = -2
		y = 1
		relative_position_id = PER_oil_baron
		cost = 10
		
		available = {

		}

		bypass = {

		}

		allow_branch = {
			RAJ = {
				has_completed_focus = RAJ_incorporation_of_the_east_india_company
			}
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			#TODO_EILIDH: add effect when EITC has been fleshed out
		}
	}

	################################
	######### ARMY BRANCH ##########
	################################

	focus = { #ARMY
		id = PER_restructure_army
		icon = GFX_focus_PER_restructure_army
		x = 20
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {

			army_experience = 25

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
					}

				is_owned_and_controlled_by = ROOT

			}

			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

	focus = { #ARMY
		id = PER_invest_in_police_corps
		icon = GFX_focus_PER_expand_imperial_guard
		prerequisite = { focus = PER_restructure_army }
		x = -6
		y = 1
		relative_position_id = PER_restructure_army
		cost = 5

		ai_will_do = {
			factor = 0
		}

		search_filters = {

		}

		completion_reward = {
				
			add_tech_bonus = {
				name = GER_all_terrain_military_motorcycle
				uses = 3
				bonus = 0.5
				category = military_police_tech
			}

			if = {
				limit = {
					has_dlc = "Gotterdammerung"
				}
				if = {
					limit = {
						NOT = { has_tech = sp_armored_motorized_military_police_tech }
					}
					add_tech_bonus = {
						name = GER_all_terrain_military_motorcycle
						uses = 1
						bonus = 1
						technology = sp_armored_motorized_military_police_tech
					}
				}
				add_equipment_bonus = {
					name = GER_all_terrain_military_motorcycle
					bonus = {
						motorbike_equipment_1 = {
							build_cost_ic = -0.25
						}
					}
				}
			}

	}
}
	

	focus = { #ARMY
		id = PER_expand_military_facilities
		icon = GFX_focus_generic_reorient_production
		prerequisite = { focus = PER_restructure_army }
		x = -3
		y = 1
		relative_position_id = PER_restructure_army
		cost = 10
		
		available = {
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 2
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 2
					    include_locked = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_czech_tanks
		icon = GFX_focus_PER_czech_tanks
		prerequisite = { focus = PER_expand_military_facilities  }
		x = 0
		y = 1
		relative_position_id = PER_expand_military_facilities
		mutually_exclusive = { focus = PER_german_tanks focus = PER_establish_tehran_armor }
		cost = 2
		
		available = {
			CZE = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			CZE = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CZE_skoda_armor_organization
				mio:CZE_skoda_armor_organization = {
					add_mio_size = 1
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CZE_skoda_armor
			}
		}
	}

	focus = { #ARMY
		id = PER_german_tanks
		icon = GFX_focus_BRA_acquire_german_tanks
		prerequisite = { focus = PER_expand_military_facilities }
		x = 2
		y = 1
		relative_position_id = PER_expand_military_facilities
		mutually_exclusive = { focus = PER_czech_tanks focus = PER_establish_tehran_armor }
		cost = 2
		
		available = {
			GER = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			GER = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = GER_henschel_organization
				mio:GER_henschel_organization = {
					add_mio_size = 1
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = henschel
			}
		}
	}

	focus = { #ARMY
		id = PER_future_of_war
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = PER_german_tanks focus = PER_czech_tanks }
		x = 1
		y = 1
		relative_position_id = PER_czech_tanks
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			add_ideas = PER_future_of_war_idea
		}
	}

	focus = { #ARMY
		id = PER_reverse_engineer_tanks
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = PER_german_tanks focus = PER_czech_tanks focus = PER_establish_tehran_armor }
		x = -1
		y = 1
		relative_position_id = PER_czech_tanks
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_tank_specialization_bonus
				bonus = 0.5
				uses = 4
				category = armor
			}
		}
	}

	focus = { #ARMY
		id = PER_establish_tehran_armor
		icon = GFX_focus_PER_establish_tehran_armor
		mutually_exclusive = { focus = PER_german_tanks focus = PER_czech_tanks }
		prerequisite = { focus = PER_expand_military_facilities }
		x = -2

		y = 1
		relative_position_id = PER_expand_military_facilities
		cost = 2

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = PER_tehran_armor_organization
				mio:PER_tehran_armor_organization = {
					add_mio_size = 2
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = PER_tehran_armor_manufacturer
			}
		}
	}

	focus = { #ARMY
		id = PER_expand_tehran_armor
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = PER_reverse_engineer_tanks }
		x = 0
		y = 1
		relative_position_id = PER_reverse_engineer_tanks
		cost = 10

		available = {
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 2
				    include_locked = yes
				}
			}
		}

		bypass = {

				}
			


		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}

				266 = { #Tehran
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = arms_factory
						level = 3
						instant_build = yes
					}
				}
	
			}

			ELSE = {
				266 = { #Tehran
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = arms_factory
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_train_tank_commanders
		icon = GFX_focus_ETH_ecole_militaire_haile_selassie_1er
		prerequisite = { focus = PER_future_of_war }
		x = 0
		y = 2
		relative_position_id = PER_future_of_war
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			custom_effect_tooltip = PER_add_panzer_leader_trait_tt 
			hidden_effect = {
				random_army_leader = {
					add_unit_leader_trait = panzer_leader
					add_skill_level = 1	
				}
				random_army_leader = {		
					add_unit_leader_trait = panzer_leader
					add_skill_level = 1
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_foreign_retraining
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = PER_restructure_army }
		x = 5
	
		y = 1
		relative_position_id = PER_restructure_army
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_foreign_retraining_idea
				days = 730
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = JUNO_army_academy_random_generals_tt
			hidden_effect = {
				random_army_leader = {		
					add_planning = 1
				}
				random_army_leader = {			
					add_planning = 1
				} 
				random_army_leader = {			
					add_planning = 1
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_bolster_infantry
		icon = GFX_goal_generic_allies_build_infantry
		prerequisite = { focus = PER_expand_military_facilities }
		x = 5
		y = 1
		relative_position_id = PER_expand_military_facilities

		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_infantry_equipment_bonus
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}

			add_tech_bonus = {
				name = PER_support_technology_bonus
				bonus = 0.5
				uses = 2
				category = support_tech
			}
		}
	}

	focus = { #ARMY
		id = PER_establish_motor_arms
		icon = GFX_focus_generic_truck
		prerequisite = { focus = PER_motorize_infantry }
		x = 0
		y = 1
		relative_position_id = PER_motorize_infantry
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_motorization_investments_idea
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_motorize_infantry
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = PER_develop_qorkhaneh }
		x = -2
	
		y = 1
		relative_position_id = PER_develop_qorkhaneh
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = motorized_bonus
				ahead_reduction = 2
				uses = 1
				category = motorized_equipment
			}
			add_tech_bonus = {
				name = PER_motorized_infantry_bonus
				bonus = 0.5
				uses = 2
				category = motorized_equipment
			}
		}
	}

	focus = { #ARMY
		id = PER_swedish_artillery
		icon = GFX_focus_PER_swedish_artillery
		prerequisite = { focus = PER_foreign_retraining }
		x = 0
		y = 1
		relative_position_id = PER_foreign_retraining
		cost = 2
		
		available = {
			SWE = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			SWE = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = SWE_bofors_organization
				mio:SWE_bofors_organization = {
					add_mio_size = 2
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = bofors
			}
		}
	}

	focus = { #ARMY
		id = PER_increase_heavy_arms
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = PER_develop_qorkhaneh }
		x = 2
		y = 1
		relative_position_id = PER_develop_qorkhaneh
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			
			add_doctrine_cost_reduction = {
				cost_reduction = 0.5
				uses = 1
				name = land_doctrine
				category = land_doctrine
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_our_own_artillery
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = PER_increase_heavy_arms }
		x = 0
		y = 1
		relative_position_id = PER_increase_heavy_arms
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_artillery_bonus
				bonus = 0.5
				uses = 2
				category = artillery
			}
		}
	}

	focus = { #ARMY
		id = PER_develop_qorkhaneh
		icon = GFX_focus_PER_develop_qorkhaneh
		prerequisite = { focus = PER_bolster_infantry focus = PER_swedish_artillery }
		x = 0
		y = 1
		relative_position_id = PER_bolster_infantry
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			random_core_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
					}

				is_owned_and_controlled_by = ROOT

			}

			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
			custom_effect_tooltip = CHL_skip_one_line_tt
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				mio:PER_qorkhaneh_organization = {
					add_mio_size = 2
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = PER_qorkhaneh
			}
		}
	}

	focus = { #ARMY
		id = PER_desert_training
		icon = GFX_focus_PER_desert_training
		prerequisite = { focus = PER_develop_qorkhaneh }
		x = 0
		y = 2
		relative_position_id = PER_develop_qorkhaneh
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {

			random_army_leader = {		
					add_planning = 1
					add_trait = {
						trait = desert_fox
					}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_army_leader = {		
					add_planning = 1
					add_trait = {
						trait = desert_fox
					}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_ideas = PER_desert_training_idea
		}
	}

	focus = { #ARMY
		id = PER_every_man_serves
		icon = GFX_focus_generic_limited_social_mobilization
		prerequisite = { focus = PER_desert_training focus = PER_train_tank_commanders }
		x = -1
		y = 2
		relative_position_id = PER_desert_training
		mutually_exclusive = { focus = PER_military_excellency }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			add_ideas = PER_conscription_idea
		}
	}

	focus = { #ARMY
		id = PER_military_excellency
		icon = GFX_focus_generic_full_social_mobilization
		prerequisite = { focus = PER_desert_training focus = PER_train_tank_commanders }
		x = 1
		y = 2
		relative_position_id = PER_train_tank_commanders
		mutually_exclusive = { focus = PER_every_man_serves }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {
			army_experience = 50
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_ideas = PER_military_excellency_idea
		}
	}

	focus = { #ARMY
		id = PER_special_units
		icon = GFX_goal_generic_special_forces
		prerequisite = { focus = PER_restructure_army }
		x = 10
		y = 1
		relative_position_id = PER_restructure_army
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_special_units_division_idea 
			}
		}
	}

	focus = { #ARMY
		id = PER_form_savak
		icon = GFX_focus_PER_form_savak
		prerequisite = { focus = PER_international_solidarity }
		x = -3
		y = 1
		relative_position_id = PER_international_solidarity
		cost = 5

		bypass = {
			
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = PER_savak_lar
				if = {
					limit = {
						has_intelligence_agency = no
					}

					create_intelligence_agency = {
						name = "SAVAK"
						icon = GFX_intelligence_agency_logo_PER_savak
					}
				}
				else = {
					add_stability = 0.05
				}
				PER_teymur_bakhtiar_operative = yes
				PER_hassan_pakravan_operative = yes	
			}
			else = {
				if = {
					limit = {
						NOT = { has_completed_focus = PER_form_savama }
					}
					add_ideas = PER_savak_idea_no_lar
				}
				else = {
					add_stability = 0.05
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_fund_state_intelligence
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = PER_form_savak }
		x = 1
		y = 1
		relative_position_id = PER_form_savak
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "La Resistance"
				}
				upgrade_intelligence_agency = upgrade_economy_civilian 
				upgrade_intelligence_agency = upgrade_training_centers 
			}
			ELSE = {
				add_ideas = PER_fund_state_intelligence_idea
			}
		}
	}

	focus = { #ARMY
		id = PER_transfer_officers_to_intelligence
		icon = GFX_focus_SWI_embrace_rote_drei
		prerequisite = { focus = PER_form_savak }
		x = -1
		y = 1
		relative_position_id = PER_form_savak
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = PER_transfer_officer_idea_lar
				PER_nematollah_nassiri_operative = yes
				PER_nasser_moghaddam_operative = yes
			}
			ELSE = {
				add_ideas = PER_transfer_officer_idea_no_lar
			}
		}
	}

	focus = { #ARMY
		id = PER_special_forces_program
		icon = GFX_focus_PER_special_forces_program
		prerequisite = { focus = PER_special_units }
		x = 2
		y = 1
		relative_position_id = PER_special_units
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_potential_special_forces_tree = yes
				add_doctrine_cost_reduction = {
					name = PER_special_units_boost
					cost_reduction = 0.25
					uses = 1
					category = special_forces_doctrine
				}
			}
			ELSE = {
				custom_effect_tooltip = PER_modify_special_forces_ns_intro
				add_to_variable = {
					PER_special_units_special_forces = 	0.1 tooltip = special_forces_cap_tt
				}
				add_to_variable = {
					PER_spec_force_training = -0.1 	tooltip = special_forces_training_time_factor_tt
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_recruit_bakhtiari
		icon = GFX_focus_PER_recruit_bakhtiari
		prerequisite = { focus = PER_special_forces_program }
		x = 0
		y = 1
		relative_position_id = PER_special_forces_program
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = { NOT = { has_tech = tech_mountaineers }}
				set_technology = { tech_mountaineers = 1 }
			}
			ELSE_IF = {
				limit = { NOT = { has_tech = tech_mountaineers2 }}
				set_technology = { tech_mountaineers2 = 1 }
			}
			ELSE_IF = {
				limit = { NOT = { has_tech = tech_mountaineers3 }}
				set_technology = { tech_mountaineers3 = 1 }
			}
	
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_doctrine_cost_reduction = {
					name = PER_bakhtiari_boost
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
		}
	}



	focus = { #ARMY
		id = PER_import_rocketry
		icon = GFX_focus_rocketry
		prerequisite = { focus = PER_special_units }
		x = 0
		y = 3
		relative_position_id = PER_special_units
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = secret_bonus
				ahead_reduction = 2
				category = rocketry
			}
			add_tech_bonus = {
				name = secret_bonus
				bonus = 0.5
				uses = 2
				category = rocketry
			}
		}
	}

	focus = { #ARMY #TODO_EILIDH: IMPLEMENT GÖTTERDAMMERUNG SPECIAL PROJECTS
		id = PER_cyrus_initiative
		icon = GFX_focus_PER_cyrus_initiative
		prerequisite = { focus = PER_german_tanks focus = PER_czech_tanks focus = PER_establish_tehran_armor}
		x = -5
		y = 1
		relative_position_id = PER_german_tanks
		cost = 10
		
		available = {
	
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				limit = {
					NOT = { has_facility_specialization = specialization_land }
				}
				if = {
					limit = {
						266 = {
							is_fully_controlled_by = ROOT
							can_construct_building = land_facility
						}
					}
					266 = {
						add_building_construction = {
							type = land_facility
							level = 1
							instant_build = yes
							province = 10768
						}
					}
				}
				else = {
					random_owned_controlled_state = {
						limit = {
							can_construct_building = land_facility
						}
						construct_building_in_random_province = {
							land_facility = 1
						}
					}
				}
			}
		}
	}



	focus = { #ARMY
		id = PER_establish_nuclear_program
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = PER_import_rocketry }
		prerequisite = { focus = PER_strategic_bombing }
		x = 4
		y = 2
		relative_position_id = PER_import_rocketry
		cost = 10

		available = {
			num_of_owned_factories > 50
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_nuclear_program
				bonus = 1
				uses = 1
				category = nuclear
			}
		}
	}

	################################
	####### AIRFORCE BRANCH ########
	################################

	focus = { #AIRFORCE
		id = PER_establish_airforce
		icon = GFX_focus_PER_establish_airforce
		x = 43
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			air_experience = 25

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
			limit = {
				air_base < 5
				is_owned_and_controlled_by = ROOT

			}

			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = air_base
				level = 1
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		}
	}

	focus = { #AIRFORCE
		id = PER_pilot_training
		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = PER_establish_airforce }
		x = -3
		y = 1
		relative_position_id = PER_establish_airforce
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			air_experience = 25
			add_dynamic_modifier = {
				modifier = PER_airforce_modifier
			}
		}
	}



	focus = { #AIRFORCE
		id = PER_luftwaffe_planes
		icon = GFX_focus_PER_luftwaffe_planes
		prerequisite = { focus = PER_pilot_training }
		x = 0
		y = 1
		relative_position_id = PER_pilot_training
		
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = small_plane_airframe
					seller_tags = { GER } 
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = medium_plane_airframe
					seller_tags = { GER } 
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = large_plane_airframe
					seller_tags = { GER } 
				}

				custom_effect_tooltip = generic_skip_one_line_tt
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				add_equipment_to_stockpile = {
					type = small_plane_airframe_0
					amount = 25
					producer = GER
				}	
				add_equipment_to_stockpile = {
					type = small_plane_cas_airframe_0
					amount = 25
					producer = GER
				}	
				add_equipment_to_stockpile = {
					type = medium_plane_airframe_0
					amount = 25
					producer = GER
				}	
			}
			else = {
				add_equipment_to_stockpile = {
					type = fighter_equipment_0
					amount = 25
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = CAS_equipment_1
					amount = 25
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = tac_bomber_equipment_0
					amount = 25
					producer = GER
				}
			}
			set_technology = {
				iw_small_airframe = 1
				basic_small_airframe = 1
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_establish_air_academy
		icon = GFX_goal_generic_build_airforce
		prerequisite = { focus = PER_luftwaffe_planes focus = PER_raf_planes }
		x = 0
		y = 1
		relative_position_id = PER_luftwaffe_planes
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_ace_generation_chance_factor = 0.15 tooltip = air_ace_generation_chance_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_doctrine_cost_factor = -0.1 tooltip = air_doctrine_cost_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_own_plane_designs
		icon = GFX_goal_generic_air_production
		prerequisite = { focus = PER_the_peoples_airforce }
		x = 2
		y = 1
		relative_position_id = PER_the_peoples_airforce
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_army_modifier_industrial_capacity_factory_airfoce = 0.05 tooltip = industrial_capacity_factory_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_strategic_bombing
		icon = GFX_focus_SWE_marauder_bombers
		prerequisite = {  focus = PER_establish_air_academy }
		x = 0
		y = 1
		relative_position_id = PER_establish_air_academy
		mutually_exclusive = { focus = PER_battlefield_support focus = PER_air_superiority }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_range_factor = 0.2 tooltip = air_range_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_strategic_bomber_bombing_factor = 0.2 tooltip = air_strategic_bomber_bombing_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_legacy_of_gilani
		icon = GFX_focus_PER_legacy_of_gilani
		prerequisite = { focus = PER_establish_air_academy }
		x = -2
		y = 1
		relative_position_id = PER_establish_air_academy
		cost = 5
		
		available = {
			#NOT = {
			#	has_completed_focus = PER_writing_on_wall
			#}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			set_rule = {
			can_generate_female_aces = yes
			}

			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_conscription_factor = 0.1 tooltip = conscription_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_ace_generation_chance_factor = 0.10 tooltip = air_ace_generation_chance_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_construct_air_bases
		icon = GFX_focus_generic_air_bases
		prerequisite = { focus = PER_establish_airforce }
		x = 3
		y = 1
		relative_position_id = PER_establish_airforce
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
			limit = {
				air_base < 5

				is_owned_and_controlled_by = ROOT
			}
			add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			random_core_state = {
			limit = {
				air_base < 5
				is_owned_and_controlled_by = ROOT
			}
			add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_anti_air_development
		icon = GFX_focus_generic_air_defense
		prerequisite = { focus = PER_anti_air_research }
		x = 0
		y = 2
		relative_position_id = PER_construct_air_bases
		cost = 10

		available = {
		
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			air_experience = 25
			add_tech_bonus = {
				name = radar_focus
				bonus = 1.0
				uses = 1
				category = radar_tech
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_anti_air_research
		icon = GFX_focus_SWE_let_fly_all_guns
		prerequisite = { focus = PER_construct_air_bases }
		x = 0
		y = 1
		relative_position_id = PER_construct_air_bases
		cost = 10

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_anti_air_research_boost
			bonus = 0.5
			uses = 2
			category = cat_anti_air
			}

			add_tech_bonus = {
			name = PER_anti_air_research_boost
			bonus = 0.5
			uses = 1
			category = radar_tech
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_air_superiority
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = PER_establish_air_academy focus = PER_anti_air_development }
		x = 0
		y = 2
		relative_position_id = PER_anti_air_research
		mutually_exclusive = { focus = PER_battlefield_support focus = PER_strategic_bombing }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_superiority_efficiency = 0.1 tooltip = air_superiority_efficiency_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_intercept_efficiency = 0.05 tooltip = air_intercept_efficiency_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_agility_factor = 0.1 tooltip = air_agility_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_battlefield_support
		icon = GFX_focus_generic_cas_aircraft
		prerequisite = { focus = PER_establish_air_academy }
		x = -3
		y = 2
		relative_position_id = PER_anti_air_research
		mutually_exclusive = { focus = PER_strategic_bombing focus = PER_air_superiority }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_superiority_efficiency = 0.05 tooltip = air_superiority_efficiency_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_cas_present_factor = 0.1 tooltip = air_cas_present_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_ground_attack_factor = 0.05 tooltip = ground_attack_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_perfect_iranian_airforce
		icon = GFX_focus_PER_perfect_iranian_airforce
		prerequisite = { focus = PER_air_superiority focus = PER_strategic_bombing focus = PER_battlefield_support}
		x = 0
		y = 1
		relative_position_id = PER_battlefield_support
		cost = 10

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			air_experience = 50

			add_doctrine_cost_reduction = {
				name = SMB_air_doctrine
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_range_factor = 0.05 tooltip = air_range_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_defence_factor = 0.15 tooltip = air_defence_factor_tt
			}
		}
	}

	################################
	######### NAVY BRANCH ##########
	################################

	focus = { #NAVY
		id = PER_establish_the_navy
		icon = GFX_focus_PER_establish_the_navy
		x = 60
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 10
			modifier = {
				any_controlled_state = {
					is_coastal = no
				}
				factor = 0	
			}
		}

		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				is_coastal = yes
			}
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			navy_experience = 25

			random_core_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
	
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #NAVY
		id = PER_officers_to_italy
		icon = GFX_focus_generic_naval_discipline
		prerequisite = { focus = PER_establish_the_navy }
		x = -2
		y = 1
		relative_position_id = PER_establish_the_navy
		cost = 5
		
		available = {
			ITA = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			ITA = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			custom_effect_tooltip = PER_naval_academy_random_admirals_tt
			navy_experience = 20
			hidden_effect = {
				random_navy_leader = {
					limit = {
						NOT = { has_character_flag = PER_officers_to_italy_boost }
					}
					add_coordination = 1
					set_character_flag = PER_officers_to_italy_boost
				}
				random_navy_leader = {
					limit = {
						NOT = { has_character_flag = PER_officers_to_italy_boost }
					}
					add_coordination = 1
					set_character_flag = PER_officers_to_italy_boost
				}
				random_navy_leader = {
					limit = {
						NOT = { has_character_flag = PER_officers_to_italy_boost }
					}
					add_coordination = 1
					set_character_flag = PER_officers_to_italy_boost
				}
			}
		}
	}

	focus = { 
		id = PER_persian_gulf_fleet
		icon = GFX_focus_PER_persian_gulf_fleet
		prerequisite = { focus = PER_officers_to_italy focus = PER_construct_naval_bases }
		x = 0
		y = 1
		relative_position_id = PER_officers_to_italy
		mutually_exclusive = { focus = PER_bolster_the_caspian }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = PER_sea_specialization
				cost_reduction = 0.5
				uses = 2
				category = cat_trade_interdiction
			}
		}
	}

	focus = { #NAVY
		id = PER_construct_naval_bases
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = PER_establish_the_navy }
		x = 2
		y = 1
		relative_position_id = PER_establish_the_navy
		cost = 10
		
		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				is_coastal = yes
			}
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {

		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
	
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}

		random_core_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
	
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { 
		id = PER_coastal_defense_initiative
		icon = GFX_focus_FIN_coastal_defense
		prerequisite = { focus = PER_construct_naval_bases }
		x = 2
		y = 1
		relative_position_id = PER_construct_naval_bases
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_coastal_fortifications_idea
				days = 365
			}
		}
	}

	focus = { #NAVY #TODO_EILIDH: Add effects after Map Changes
		id = PER_bolster_the_caspian
		icon = GFX_focus_PER_bolster_the_caspian
		prerequisite = { focus = PER_construct_naval_bases focus = PER_officers_to_italy }
		x = 0
		y = 1
		relative_position_id = PER_construct_naval_bases
		mutually_exclusive = { focus = PER_persian_gulf_fleet }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = PER_sea_specialization
				cost_reduction = 0.5
				uses = 2
				category = cat_base_strike
			}
		}
	}

	focus = { #NAVY
		id = PER_purchase_foreign_ships
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = PER_bolster_the_caspian focus = PER_persian_gulf_fleet }
		x = 2
		y = 1
		relative_position_id = PER_persian_gulf_fleet
		cost = 5

		ai_will_do = {
			factor = 10
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = ETH_purchase_obsolete_ships_tt
			set_country_flag = generic_purchase_old_ships_flag
		}
	}

	focus = { #NAVY
		id = PER_found_iranian_shipyards
		icon = GFX_focus_POL_develop_polish_shipbuilding
		prerequisite = { focus = PER_establish_the_navy }
		x = 7
		y = 1
		relative_position_id = PER_establish_the_navy
		cost = 2

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = PER_iranian_shipyards_organization
				mio:PER_iranian_shipyards_organization = {
					add_mio_size = 2
				}
			}
			else = {
				if = {
					limit = {
						has_idea = PER_iranian_shipyards
					}
					swap_ideas = {
						remove_idea = PER_iranian_shipyards
						add_idea = PER_iranian_shipyards_improved
					}
				}
				else = {
					effect_tooltip = {
						swap_ideas = {
							remove_idea = PER_iranian_shipyards
							add_idea = PER_iranian_shipyards_improved
						}
					}
				}
			}
		}
	}

	focus = { #NAVY
		id = PER_expand_dockyards
		icon = GFX_focus_generic_refit_civilian_ships
		prerequisite = { focus = PER_found_iranian_shipyards }
		x = 0
		y = 1
		relative_position_id = PER_found_iranian_shipyards
		cost = 5

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = { 
					is_coastal = yes 
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					#has_state_flag = SMB_expanded_naval_bases
				}
				IF = {
					limit = { naval_base < 8 }
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
							province = {
								all_provinces = yes
								limit_to_coastal = yes
						    }
					}
				}
				IF = {
					limit = { 
						dockyard < 8
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
					
				}
			}
		}
	}

	focus = { #NAVY
		id = PER_merchant_navy
		icon = GFX_focus_generic_merchant_fleet
		prerequisite = { focus = PER_expand_dockyards }
		x = -2
		y = 1
		relative_position_id = PER_expand_dockyards
		mutually_exclusive = { focus = PER_expert_raiders }
		cost = 5

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			add_ideas = POR_convoy_build_efficiency
		}
	}

	focus = { #NAVY
		id = PER_expert_raiders
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = PER_expand_dockyards }
		x = 2
		y = 1
		relative_position_id = PER_expand_dockyards
		mutually_exclusive = { focus = PER_merchant_navy }
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		search_filters = {

		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = PER_raiding_fleet_boost
				cost_reduction = 0.5
				uses = 2
				category = trade_interdiction_tree
			}
		}
	}

	################################
	###### HISTORICAL BRANCH #######
	################################


	focus = { #HISTORICAL
		id = PER_stand_with_giants
		icon = GFX_focus_PER_stand_with_giants
		prerequisite = { focus = PER_modernizing_iran }
		x = -3
	
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		ai_will_do = {
			factor = 80
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_HISTORICAL
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_stand_with_giants_modifier
			}
		}
	}



	focus = { #HISTORICAL
		id = PER_increase_education_funding
		icon = GFX_focus_generic_university_2
		prerequisite = { focus = PER_stand_with_giants }
		x = -2
		y = 1
		relative_position_id = PER_stand_with_giants
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_research = 0.05
				tooltip = research_speed_factor_tt
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_tech_bonus = {
			name = PER_increase_education_funding_bonus
			bonus = 0.25
			uses = 2
			category = electronics
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_open_abadan
		icon = GFX_focus_research
		prerequisite = { focus = PER_increase_education_funding }
		x = -3
		y = 1
		relative_position_id = PER_increase_education_funding
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
		}
	}

focus = { #Fascism
		id = PER_communist_secularism
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = PER_open_abadan  }
		x = 0
		y = 1
		relative_position_id = PER_open_abadan
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
			remove_ideas = PER_islamic_traditions_ns
			custom_effect_tooltip = newline_tt
			add_timed_idea = {
				idea = PER_lingering_islamic_beliefs
				days = 210
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_persian_german_trade
		icon = GFX_goal_generic_positive_trade_relations
		prerequisite = { focus = PER_stand_with_giants }
		x = 0
		y = 2
		relative_position_id = PER_stand_with_giants
		cost = 5
		
		available = {
			has_government = communism
			GER = {
				has_government = communism
				exists = yes
			}
		}

		bypass = {
			GER = {
				OR = {
					NOT = {
					has_government = communism
				}
				exists = no
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			GER = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			PER = {
				add_opinion_modifier = {
				target = GER
				modifier = large_increase
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_ideas = PER_persian_german_trade_idea
			GER = {
				add_ideas = PER_persian_german_trade_idea_2
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_increase_military_funding
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = PER_stand_with_giants }
		x = 2
		y = 1
		relative_position_id = PER_stand_with_giants
		cost = 5
		
		available = {
			has_government = communism
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 2
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 2
					    include_locked = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 50
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			army_experience = 50

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}
	}



	focus = { #HISTORICAL
		id = PER_wether_the_storm
		icon = GFX_focus_PER_wether_the_storm
		prerequisite = { focus = PER_persian_german_trade }
		x = 0

		y = 2
		relative_position_id = PER_persian_german_trade
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			
			add_to_variable = { 
				PER_giants_mils = 0.15
				tooltip = production_speed_arms_factory_factor_tt
				
			}

			if = {
				limit = {
					NOT = {
						has_idea = extensive_conscription
						has_idea = service_by_requirement
						has_idea = all_adults_serve
						has_idea = scraping_the_barrel
					}
				}
				add_ideas = extensive_conscription
			}
			else = {
				add_political_power = 150
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_question_of_resources
		icon = GFX_focus_generic_resource_extraction
		prerequisite = { focus = PER_wether_the_storm }
		x = -2
		y = 1
		relative_position_id = PER_wether_the_storm
		cost = 5
		
		available = {
			has_government = communism
			has_war = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			IF = {
				limit = {
					has_idea = PER_anglo_iranian_oil_ns
				}
				remove_ideas = PER_anglo_iranian_oil_ns
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_ideas = limited_exports
			add_resource = {
				type = steel
				amount = 16
				state = 267
			}
			add_resource = {
				type = oil
				amount = 12
				state = 412
			}
			add_resource = {
				type = steel
				amount = 18
				state = 415
			}
			add_resource = {
				type = tungsten
				amount = 6
				state = 415
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_prepare_for_worst
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = PER_stand_our_ground }
		x = -1
		y = 1
		relative_position_id = PER_stand_our_ground
		cost = 10
		
		available = {
			has_government = communism
			has_war = no
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 1
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 1
					    include_locked = yes
					}
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt	

			1004 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 7573
					instant_build = yes
				}
			}

			410 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 13082
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt	

			420 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 10454
					}
					instant_build = yes
				}
			}

			1000 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 4755
					}
					instant_build = yes
				}
			}

			419 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 1636
					}
					instant_build = yes
				}
			}

			266 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 7602
					}
					instant_build = yes
				}
			}

			416 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 5029
					}
					instant_build = yes
				}
			}
		}
	}


	focus = { #HISTORICAL
		id = PER_preemptive_strike
		icon = GFX_focus_generic_total_war
		prerequisite = { focus = PER_western_mountain_wall }
		x = 1
		y = 2
		relative_position_id = PER_western_mountain_wall
		cost = 5
		
		available = {	
			has_government = communism
			has_war = no

			GRE = {
				exists = yes
			}

			TUR = {
				exists = no
			}

			PON = {
				exists = no
			}
		}

		bypass = {

			GRE = {
				exists = no
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {

			add_timed_idea = {
				idea = PER_preemtive_strike_idea
				days = 730
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			create_wargoal = {
					type = puppet_wargoal_focus
					target = GRE
				}

			}
		}



	focus = { #HISTORICAL
		id = PER_stand_our_ground
		icon = GFX_goal_generic_defence
		prerequisite = { focus = PER_wether_the_storm }
		x = 2
		y = 1
		relative_position_id = PER_wether_the_storm
		
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_conscription = 0.05
				tooltip = conscription_factor_tt
			}
			add_to_variable = { 
				PER_giants_factory_efficiency = 0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			add_to_variable = { 
				PER_giants_industrial_capacity_factory = 0.05
				tooltip = industrial_capacity_factory_tt
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_bolster_civilian_industry
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = PER_question_of_resources }
		x = -1
		y = 1
		relative_position_id = PER_question_of_resources
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
						}
	
					is_owned_and_controlled_by = ROOT
	
				}
	
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_upscale_military_production
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = PER_stand_our_ground }
		x = 1
		y = 1
		relative_position_id = PER_stand_our_ground
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_to_variable = { 
				PER_giants_factory_efficiency = 0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
						}
	
					is_owned_and_controlled_by = ROOT
	
				}
				custom_effect_tooltip = generic_skip_one_line_tt
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_preparatory_mobilization
		icon = GFX_focus_generic_limited_social_mobilization
		prerequisite = { focus = PER_upscale_military_production }
		x = 0
		y = 1
		relative_position_id = PER_upscale_military_production
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY 
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_mils = 0.10
				tooltip = production_speed_arms_factory_factor_tt
			}
			add_to_variable = { 
				PER_giants_training_time = -0.15
				tooltip = training_time_factor_tt
			}
			add_to_variable = { 
				PER_giants_conscription = 0.1
				tooltip = conscription_factor_tt
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_we_will_survive
		icon = GFX_focus_generic_workers_and_farmers_rise
		prerequisite = { focus = PER_preparatory_mobilization }
		x = 0
		y = 1
		relative_position_id = PER_preparatory_mobilization
		cost = 5
		
		available = {
			has_government = communism
			has_war = yes
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			add_country_leader_trait = PER_savior_of_iran
		}
	}

	################################
	######## SAADABAD PACT #########
	################################

#	shared_focus = SSB_the_saadabad_pact

	################################
	####### DEFENCE OF IRAN ########
	################################

	focus = { #DEFENCE
		id = PER_fight_for_iran
		icon = GFX_focus_PER_fight_for_iran
		x = -19
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 0
		
		available = {
			has_defensive_war = yes
			has_civil_war = no
		}

		cancel_if_invalid = yes

		bypass = {

		}

		allow_branch = {

		}

        offset = {
            x = 10
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_rally_the_reformers
            }
        }

        offset = {
            x = 15
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                OR = {
                	has_completed_focus = PER_rally_behind_mosaddegh
                	has_completed_focus = PER_iranian_culture
                	has_completed_focus = PER_united_progressive_parties
                }
            }
        }

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			add_timed_idea = {
 				idea = PER_homeland_not_fall_idea
 				days = 180
 			}
 			custom_effect_tooltip = CHL_skip_one_line_tt
 			add_manpower = 10000
		}
	}

	focus = { #DEFENCE
		id = PER_force_them_back
		icon = GFX_focus_generic_provoke_border_clashes
		x = -2
		y = 1
		prerequisite = { focus = PER_fight_for_iran }
		relative_position_id = PER_fight_for_iran
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		cancel_if_invalid = yes

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_offensive_tactics_modifier
			}
		}
	}

	focus = { #DEFENCE
		id = PER_dig_and_defend
		icon = GFX_goal_generic_more_territorial_claims
		x = 2
		y = 1
		prerequisite = { focus = PER_fight_for_iran }
		relative_position_id = PER_fight_for_iran
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		cancel_if_invalid = yes

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_defensive_maneuvers_modifier
			}
		}
	}

	focus = { #DEFENCE
		id = PER_push_to_deserts
		icon = GFX_focus_PER_push_to_deserts
		x = -1
		y = 1
		prerequisite = { focus = PER_force_them_back }
		relative_position_id = PER_force_them_back
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {

		}

		completion_reward = {
			every_state = {
 				limit = {
 					OR = {
	 					state = 1003
			 			state = 418
			 			state = 416
			 			state = 1004
			 			state = 420
			 			state = 1000
			 			state = 419
			 		}
	 			}
	 			add_dynamic_modifier = {
	 				modifier = ETH_state_local_offensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_push_to_mountains
		icon = GFX_focus_PER_push_to_mountains
		x = 1
		y = 1
		prerequisite = { focus = PER_force_them_back }
		relative_position_id = PER_force_them_back
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			every_state = {
 				limit = {
 					OR = {
	 					state = 413
			 			state = 411
			 			state = 412
			 			state = 1002
			 			state = 414
			 			state = 410
			 		}
	 			}
	 			add_dynamic_modifier = {
	 				modifier = ETH_state_local_offensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_capital_protect
		icon = GFX_goal_generic_fortify_city
		x = -1
		y = 1
		prerequisite = { focus = PER_dig_and_defend }
		relative_position_id = PER_dig_and_defend
		cost = 5
		
		available = {
			266 = {
				is_owned_and_controlled_by = PER
			}
			has_defensive_war = yes
		}

		bypass = {
			266 = { NOT = { is_controlled_by = ROOT } }
			410 = { NOT = { is_controlled_by = ROOT } }
			412 = { NOT = { is_controlled_by = ROOT } }
			413 = { NOT = { is_controlled_by = ROOT } }
		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			every_state = {
 				limit = {
 					state = 266
	 			}
	 			add_dynamic_modifier = {
	 				modifier = PER_state_local_defensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
				add_building_construction = {
					type = bunker
					level = 2
					province = {
						id = 10837
					}
					instant_build = yes
				}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_secure_coastline
		icon = GFX_focus_FIN_coastal_defense
		x = 1
		y = 1
		prerequisite = { focus = PER_dig_and_defend }
		relative_position_id = PER_dig_and_defend
		cost = 5
		
		available = {
			has_defensive_war = yes
			count_triggers = {
				amount = 1 # Add triggers to count below
				410 = { is_owned_and_controlled_by = ROOT }
				412 = { is_owned_and_controlled_by = ROOT }
				413 = { is_owned_and_controlled_by = ROOT }
			}
		}

		bypass = {
			266 = { NOT = { is_controlled_by = ROOT } }
			410 = { NOT = { is_controlled_by = ROOT } }
			412 = { NOT = { is_controlled_by = ROOT } }
			413 = { NOT = { is_controlled_by = ROOT } }
		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			every_state = {
 				limit = {
 					OR = {
 						state = 410
 						state = 412
 						state = 413
 					}
	 			}
	 			add_dynamic_modifier = {
	 				modifier = PER_state_local_defensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_demand_war_reparations
		icon = GFX_goal_generic_demand_territory
		x = 1
		y = 1
		prerequisite = { focus = PER_push_to_deserts focus = PER_push_to_mountains }
		mutually_exclusive = { focus = PER_force_white_peace focus = PER_swear_fealty focus = PER_push_negotiations }
		relative_position_id = PER_push_to_deserts
		cost = 5
		
		available = {
			has_defensive_war = yes
			any_war_score > 79
			surrender_progress < 0.05
			longest_war_length > 6
			is_in_faction = no
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 25
		}

		search_filters = {
			
		}

		completion_reward = {
			custom_effect_tooltip = PER_reparations_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			every_enemy_country = {
				IF = {
					limit = {
						OR = {
							tag = AFG
							tag = IRQ
							tag = TUR
							tag = RAJ
							tag = SOU
							tag = ENG
						}
						has_country_flag = PER_invading_country_flag
					}
					country_event = {
						id = PER_imperial_events.160
						hours = 1
					}
				}
				ELSE = {
					country_event = {
						id = PER_imperial_events.170
						hours = 1
					}
				}
			}
		}
	}

	focus = { #DEFENCE
		id = PER_force_white_peace
		icon = GFX_goal_generic_major_alliance
		x = 3
		y = 1
		prerequisite = { focus = PER_push_to_deserts focus = PER_push_to_mountains }
		mutually_exclusive = { focus = PER_demand_war_reparations focus = PER_swear_fealty focus = PER_push_negotiations }
		relative_position_id = PER_push_to_deserts
		cost = 5
		
		available = {
			has_defensive_war = yes
			any_war_score > 59
			surrender_progress < 0.15
			longest_war_length > 6
			is_in_faction = no
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_white_peace_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			every_enemy_country = {
				limit = {
					has_country_flag = PER_invading_country_flag
				}
				country_event = {
					id = PER_imperial_events.150
					hours = 1
				}
			}
		}
	}

	focus = { #DEFENCE
		id = PER_push_negotiations
		icon = GFX_goal_generic_forceful_treaty
		x = 1
		y = 1
		prerequisite = { focus = PER_capital_protect focus = PER_secure_coastline }
		mutually_exclusive = { focus = PER_swear_fealty }
		relative_position_id = PER_capital_protect
		cost = 5
		
		available = {
			has_defensive_war = yes
			any_war_score > 39
			surrender_progress < 0.1
			longest_war_length > 6
			is_in_faction = no
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_push_negotiations_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			every_enemy_country = {
				IF = {
					limit = {
						has_country_flag = PER_invading_country_flag
					}
					country_event = {
						id = PER_imperial_events.190
						hours = 1
					}
				}
			}
		}
	}

	
	

	################################
	###### DEMOCRATIC BRANCH #######
	################################

	#focus = { #DEMOCRATIC
	#	id = PER_separate_crown
	#	icon = GFX_focus_PLACEHOLDER
	#	x = -50
	#	y = 0
	#	relative_position_id = PER_modernizing_iran
	#	mutually_exclusive = { focus = PER_the_pahlavi_imperium }
	#	cost = 5
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
#
	#	}
	#}	

	focus = { #DEMOCRATIC
		id = PER_rally_the_reformers
		icon = GFX_goal_generic_national_unity
		#prerequisite = { focus = PER_separate_crown }
		x = -38
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {
			NOT = {
				has_completed_focus = PER_the_pahlavi_imperium
			}
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_political_power = 75
			add_stability = 0.10
		}
	}

	#focus = { #DEMOCRATIC
	#	id = PER_rally_suppressed_opposition
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_rally_the_reformers }
	#	x = -1
	#	y = 1
	#	relative_position_id = PER_rally_the_reformers
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
#
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_lobby_military_dissidents
	#	icon = GFX_focus_generic_military_mission
	#	prerequisite = { focus = PER_strengthen_the_tudeh }
	#	x = -3
	#	y = 1
	#	relative_position_id = PER_strengthen_the_tudeh
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		custom_effect_tooltip = PER_modify_opposition_tt
	#		add_to_variable = {
	#			var = PER_army_core_defence_factor
	#			value = 0.1
	#			tooltip = army_core_defence_factor_tt
	#		}
	#		add_to_variable = {
	#			var = PER_army_core_attack_factor
	#			value = 0.1
	#			tooltip = army_core_attack_factor_tt
	#		}
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_exclude_religion
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_rally_suppressed_opposition focus = #PER_lobby_military_dissidents }
	#	x = 2
	#	y = 1
	#	relative_position_id = PER_rally_suppressed_opposition
	#	mutually_exclusive = { focus = PER_promise_clergy_power }
	#	cost = 5
	#	available = {
	#	}
	#	bypass = {
	#	}
	#	allow_branch = {
	#	}
	#	ai_will_do = {
	#		factor = 0
	#	}
	#	search_filters = {
	#	}
	#	completion_reward = {
	#		custom_effect_tooltip = PER_modify_opposition_tt
	#		add_to_variable = {
	#			var = PER_opposition_communism_drift
	#			value = 0.03
	#			tooltip = communism_drift_tt
	#		}
	#		add_to_variable = {
	#			var = PER_opposition_democratic_drift
	#			value = 0.03
	#			tooltip = democratic_drift_tt
	#		}
	#		add_to_variable = {
	#			var = PER_opposition_stability_factor
	#			value = -0.05
	#			tooltip = stability_factor_tt
	#		}
	#	}
	#}

	
	#focus = { #DEMOCRATIC
	#	id = PER_allow_britain_access
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_expand_oil_production }
	#	x = -1
	#	y = 1
	#	relative_position_id = PER_expand_oil_production
	#	mutually_exclusive = { focus = PER_increase_oil_sales }
	#	cost = 5
	#	
	#	available = {
	#	}
	#	bypass = {
	#	}
	#	allow_branch = {
	#	}
	#	ai_will_do = {
	#		factor = 0
	#	}
	#	search_filters = {
	#	}
	#	completion_reward = {
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_follow_the_tudeh
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_stage_mass_protests }
	#	x = 2
	#	y = 1
	#	relative_position_id = PER_stage_mass_protests
	#	#mutually_exclusive = { focus = PER_rally_behind_mosaddegh focus = #PER_constitutional_monarchy focus = PER_iranian_culture }
	#	cost = 5
	#	
	#	available = {
	#		communism > 0.35
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		custom_effect_tooltip = PER_modify_opposition_tt
	#		add_to_variable = {
	#			var = PER_opposition_communism_drift
	#			value = 0.03
	#			tooltip = communism_drift_tt
	#		}
	#		set_variable = {
	#			var = PER_opposition_democratic_drift
	#			value = 0
	#			tooltip = democratic_drift_tt
	#		}
	#	}
	#}

	



	focus = { #DEMOCRATIC
		id = PER_ally_bazaari
		icon = GFX_focus_PER_ally_bazaari
		prerequisite = { focus = PER_iranian_socialist_revolution }
		x = -1
		y = 1
		relative_position_id = PER_iranian_socialist_revolution
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			remove_ideas = PER_azerbaijan_resistance_idea
		}
	}




	#focus = { #DEMOCRATIC
	#	id = PER_promote_resistance_levant
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_islamic_solidarity }
	#	x = 0
	#	y = 1
	#	relative_position_id = PER_islamic_solidarity
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		custom_effect_tooltip = "TODO: decisions to stir resistance in Jordan, egypt and #Palestine"
	#	}
	#}


	focus = { #DEMOCRATIC
		id = PER_post_war_spoils
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = PER_we_will_survive }
		x = 0
		y = 1
		relative_position_id = PER_we_will_survive
		cost = 10
		
		available = {
			has_government = communism
			OR = {
				owns_state = 415
				owns_state = 1009
				owns_state = 1008
				owns_state = 1006
				owns_state = 1005
				owns_state = 267
				owns_state = 1007
				owns_state = 676
				owns_state = 291
				owns_state = 1011
				owns_state = 675
				owns_state = 1010
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
		#TODO_EILIDH: Maybe add an event asking the countries to be annexed?
			415 = { add_core_of = ROOT }
			1009 = { add_core_of = ROOT }
			1008 = { add_core_of = ROOT }
			1006 = { add_core_of = ROOT }
			1005 = { add_core_of = ROOT }
			267 = { add_core_of = ROOT }
			1007 = { add_core_of = ROOT }
			676 = { add_core_of = ROOT }
			291 = { add_core_of = ROOT }
			1011 = { add_core_of = ROOT }
			675 = { add_core_of = ROOT }
			1010 = { add_core_of = ROOT }
		}
	}

	#focus = { #DEMOCRATIC
	#	id = PER_defend_our_sovereignty
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_nationalize_oil_fields }
	#	x = 0
	#	y = 1
	#	relative_position_id = PER_nationalize_oil_fields
	#	#mutually_exclusive = { focus = PER_compromise_with_britain }
	#	cost = 5
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		add_timed_idea = {
	#			idea = PER_eng_war_bonus
	#			days = 730
	#		}
	#		add_war_support = 0.1
#
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_concessions_from_britain
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_defend_our_sovereignty }
	#	x = 0
	#	y = 1
	#	relative_position_id = PER_defend_our_sovereignty
	#	cost = 5
	#	
	#	available = {
	#		has_war_with = ENG
	#		has_capitulated = no
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		656 = { add_claim_by = ROOT } 
	#		765 = { add_claim_by = ROOT }
	#		658 = { add_claim_by = ROOT }
	#		custom_effect_tooltip = "TODO: Add event chain with UK"
	#		custom_effect_tooltip = if_they_accept_tt
	#		effect_tooltip = {
	#			IF = {
	#				limit = {
	#					OR = {
	#						444 = { OWNER = { is_subject_of = ENG } }
	#						988 = { OWNER = { is_subject_of = ENG } }
	#					}
	#				}
	#				444 = { set_demilitarized_zone = yes }
	#				988 = { set_demilitarized_zone = yes }
	#			}
	#			IF = {
	#				limit = {
	#					OR = {
	#						656 = { 
	#							OR = { 
	#								is_owned_and_controlled_by = ENG 
	#								OWNER = { is_subject_of = ENG }
	#							}
	#						}
	#						765 = { 
	#							OR = { 
	#								is_owned_and_controlled_by = ENG 
	#								OWNER = { is_subject_of = ENG }
	#							}
	#						}
	#						658 = { 
	#							OR = { 
	#								is_owned_and_controlled_by = ENG 
	#								OWNER = { is_subject_of = ENG }
	#							}
	#						}
	#					}
	#				}
	#				ENG = {
	#					every_owned_state = {
	#						limit = {
	#							OR = {
	#								state = 656
	#								state = 765
	#								state = 658
	#							}
	#						}
	#						set_state_owner_to = ROOT
	#					}
	#				}
	#			}
	#		}
	#	}
	#}

	################################
	##### COMMUNIST SUB-BRANCH #####
	################################

	focus = { #COMMUNIST
		id = PER_united_progressive_parties
		icon = GFX_focus_SWE_socialist_reforms
		#prerequisite = { focus = PER_force_abdication }
		prerequisite = { focus = PER_rally_the_reformers focus = PER_rally_the_reformers }
		mutually_exclusive = { focus = PER_rally_behind_mosaddegh focus = PER_iranian_culture }
		x = o
		y = 1
		relative_position_id = PER_rally_the_reformers
		cost = 5
		
		available = {
			
		}

		bypass = {
		}

		allow_branch = {

		}


		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			
			add_country_leader_trait = GER_inflexible_communist_organizer
		}
	}

	focus = { #DEMOCRATIC
		id = PER_reach_to_seperatists
		icon = GFX_focus_GER_support_the_proletarian_uprising
		prerequisite = { focus = PER_united_progressive_parties }
		x = 0
		y = 1
		relative_position_id = PER_united_progressive_parties
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_stability = 0.1
			add_war_support = 0.05
		}
	}


	focus = { #COMMUNIST
		id = PER_iranian_socialist_revolution
		icon = GFX_focus_generic_workers_and_farmers_rise
		prerequisite = { focus = PER_reach_to_seperatists }
		x = -1
		y = 1
		relative_position_id = PER_reach_to_seperatists
		cost = 10
		
		available = {
			communism > 0.35
			is_subject = no
		}

		bypass = {
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_political_power = 50
			add_stability = 0.05
			add_war_support = 0.05
			add_dynamic_modifier = {
				modifier = PER_communist_industrialization_idea
			}
			
			
		}
	}

	focus = { #COMMUNIST
		id = PER_soviet_alignment
		icon = GFX_focus_GER_stakhanovite_movement
		prerequisite = { focus = PER_iranian_socialist_revolution }
		x = -3
		y = 2
		relative_position_id = PER_iranian_socialist_revolution
		cost = 2
		
		available = {
			has_civil_war = no
			has_government = communism
			is_in_faction = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			IF = {
				limit = {
					GER = {
						has_government = communism 
						is_faction_leader = yes
					}
				}
				GER = {
					country_event = { id = generic.2 hours = 4 }
					#custom_effect_tooltip = AFG_ideology_on_the_rise_tt
				}
				every_other_country = {
					limit = {
						is_major = yes
						NOT = {
							OR = {
								tag = GER
								is_in_faction_with = GER
							}
						}
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = large_decrease
					}
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_industrial_aid
		icon = GFX_focus_generic_communist_industry
		prerequisite = { focus = PER_soviet_alignment }
		x = -0
		y = 2
		relative_position_id = PER_soviet_alignment
		cost = 10
		
		available = {
			is_in_faction_with = GER
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_elevate_the_iran_party
		icon = GFX_focus_PER_elevate_the_iran_party
		prerequisite = { focus = PER_reach_to_seperatists }
		x = 1
		y = 1
		relative_position_id = PER_reach_to_seperatists
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_party_name = {
				ideology = communism
				name = PER_communism_iran_party
				long_name = PER_communism_iran_party_long
			}
			add_political_power = 100
		}
	}

	focus = { #COMMUNIST
		id = PER_appease_the_seperatists
		icon = GFX_focus_GER_strengthen_the_proletarian_international
		prerequisite = { focus = PER_iranian_socialist_revolution }
		prerequisite = { focus = PER_elevate_the_iran_party }
		x = 1
		y = 1
		relative_position_id = PER_elevate_the_iran_party
		cost = 10
		
		available = {
			has_civil_war = no
			has_government = communism
			has_idea = PER_azerbaijan_resistance_idea
			has_idea = PER_kurdistan_resistance_idea
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_appease_the_seperatists_tt
			
			IF = {
				limit = {
					KUR = {
						exists = no
					}
					any_owned_state = {
						is_core_of = KUR
					}
				}
				release_puppet = KUR
				set_autonomy = {
					target = KUR
					autonomous_state = autonomy_satellite
					freedom_level = 0.2
				}
			}
			ELSE = {
				
					IF = {
						limit = {
							1001 = { OWNER = { tag = ROOT } }
						}
						1001 = {
							transfer_state_to = KUR
						}
					}
					IF = {
						limit = {
							421 = { OWNER = { tag = ROOT } }
						}
						421 = {
							transfer_state_to = KUR
						}
					}
					IF = {
						limit = {
							419 = { OWNER = { tag = ROOT } }
						}
						419 = {
							transfer_state_to = KUR
						}
					}
					set_popularities = {
						democratic = ROOT.party_popularity_100@democratic
						neutrality = ROOT.party_popularity_100@neutrality
						fascism = ROOT.party_popularity_100@fascism
						communism = ROOT.party_popularity_100@communism
					}
					set_politics = {
						ruling_party = communism
					}
					ROOT = {
						puppet = KUR
						set_autonomy = {
							target = KUR
							autonomous_state = autonomy_satellite
							freedom_level = 0.2
						}
					}
				
			}
			remove_ideas = PER_kurdistan_resistance_idea
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_education_reform
		icon = GFX_focus_NOR_moscows_education_centers
		prerequisite = { focus = PER_increase_education_funding }
		x = 0
		y = 2
		relative_position_id = PER_increase_education_funding
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_research = 0.05
				tooltip = research_speed_factor_tt
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_the_new_economy
		icon = GFX_goal_generic_soviet_construction
		#prerequisite = { focus = PER_workers_army }
		prerequisite = { focus = PER_communist_propaganda focus = PER_communist_industrialization }
		x = 2
		y = 2
		relative_position_id = PER_communist_propaganda
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_ideas = PER_the_new_economy_idea
		}
	}

	focus = { #COMMUNIST
		id = PER_oil_and_rubber_industry
		icon = GFX_focus_generic_rubber
		prerequisite = { focus = PER_the_new_economy }
		x = 1
		y = 1
		relative_position_id = PER_the_new_economy
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			IF = {
				limit = {
					NOT = { has_tech = synth_oil_experiments }
				}
				set_technology = { synth_oil_experiments = 1 }
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
				add_resource = {
					type = rubber
					amount = 10
				}
			}
		}	
	}

	focus = { #COMMUNIST
		id = PER_workers_army
		icon = GFX_focus_SOV_builder_of_the_red_army
		prerequisite = { focus = PER_the_new_economy }
		x = -1
		y = 1
		relative_position_id = PER_the_new_economy
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			add_command_power = 30
			army_experience = 50
			PER_ahmad_amir_ahmadi = {
				add_trait = { trait = inflexible_strategist }
			}
			PER_ali_akbar_derakhshani = {
				add_trait = { trait = inflexible_strategist }
			}
			PER_jafar_kavian = {
				add_trait = { trait = brilliant_strategist }
			}
			IF = {
				limit = {
					has_character = PER_ali_akbar_derakhshani
					PER_ali_akbar_derakhshani = {
						is_field_marshal = no
					}
				}
				custom_effect_tooltip = generic_skip_one_line_tt
				PER_ali_akbar_derakhshani = {
					promote_leader = yes
				}
			}
			IF = {
				limit = {
					has_character = PER_jafar_kavian
					PER_jafar_kavian = {
						is_field_marshal = no
					}
				}
				custom_effect_tooltip = generic_skip_one_line_tt
				PER_jafar_kavian = {
					promote_leader = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_the_peoples_airforce
		icon = GFX_focus_PER_the_peoples_airforce
		prerequisite = { focus = PER_establish_airforce }
		x = 6
		y = 1
		relative_position_id = PER_establish_airforce
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						state = 413
						state = 410
						state = 412
					}
				}

				add_building_construction = {
					type = air_base
					level = 4
					instant_build = yes
				}
			}
			air_experience = 25
			add_doctrine_cost_reduction = {
				name = PER_the_peoples_airforce
				cost_reduction = 0.75
				uses = 1
				category = air_doctrine
			}
			add_to_variable = {
				PER_airforce_modifier_air_ace_generation_chance_factor = 0.05 tooltip = air_ace_generation_chance_factor_tt
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_air_defense
		icon = GFX_focus_FIN_foreign_anti_air
		prerequisite = { focus = PER_the_peoples_airforce }
		x = -0
		y = 1
		relative_position_id = PER_the_peoples_airforce
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			set_technology = { interwar_antiair = 1 }
			every_owned_state = {
				limit = {
					is_fully_controlled_by = ROOT
					OR = {
						has_state_category = town
						has_state_category = large_town
						has_state_category = city
						has_state_category = large_city
						has_state_category = megalopolis
						has_state_category = metropolis
					} 
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_basic_plane_design
		icon = GFX_focus_generic_air_bases
		prerequisite = { focus = PER_luftwaffe_planes }
		x = -2
		y = 1
		relative_position_id = PER_luftwaffe_planes
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = { has_dlc = "By Blood Alone"}
				set_technology = { iw_small_airframe = 1 }
				set_technology = { aa_lmg = 1 }
				set_technology = { early_bombs = 1 }
				air_experience = 15
			}
			ELSE = {
				add_tech_bonus = {
					name = PER_tech_share_bonus
					bonus = 0.5
					uses = 2
					category = light_air
				}
				air_experience = 25	
			}
		}
	}



	focus = { #COMMUNIST
		id = PER_challenge_the_royal_navy
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = PER_communist_naval_designs }
		x = -1
		y = 1
		relative_position_id = PER_communist_naval_designs
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = {
					has_completed_focus = PER_communist_naval_bomber_design
				}
				air_experience = 50
				add_doctrine_cost_reduction = {
					name = PER_challenge_the_royal_navy
					cost_reduction = 0.75
					uses = 1
					category = air_doctrine
				}
			}
			ELSE = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = PER_challenge_the_royal_navy
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
	}


	focus = { #COMMUNIST
		id = PER_the_peoples_navy
		icon = GFX_focus_PER_the_peoples_navy
		prerequisite = { focus = PER_establish_the_navy }
		x = -6
		y = 1
		relative_position_id = PER_establish_the_navy
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			navy_experience = 25
			add_doctrine_cost_reduction = {
				name = PER_the_peoples_navy
				cost_reduction = 0.75
				uses = 1
				category = naval_doctrine
			}
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					naval_base > 0
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_shore_defense
		icon = GFX_focus_FIN_coastal_defense
		prerequisite = { focus = PER_the_peoples_navy }
		x = 2
		y = 1
		relative_position_id = PER_the_peoples_navy
		cost = 5
		
		available = {	
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						state = 413
						state = 410
						state = 412
						state = 1011
						state = 656
						state = 859
						state = 678
						state = 765
						state = 658
						state = 294
					}
				}
				add_building_construction = { #Persian Gulf Coast
					type = coastal_bunker
					level = 2
					instant_build = yes
					province =  {
						all_provinces = yes
						limit_to_coastal = yes
					}
				}
				
				add_extra_state_shared_building_slots = 1
				add_building_construction = { #Persian Gulf Coast
					type = dockyard
					level = 1
					instant_build = yes
					province =  {
						all_provinces = yes
						limit_to_coastal = yes
					}
				}
			} 
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_naval_designs
		icon = GFX_focus_SWE_coastal_support
		prerequisite = { focus = PER_the_peoples_navy }
		x = 0
		y = 1
		relative_position_id = PER_the_peoples_navy
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_technology = { basic_torpedo = 1 }
			set_technology = { naval_gunnery = 1 }
			navy_experience = 45
		}

		
	}

	focus = { #COMMUNIST
		id = PER_communist_submarine_design
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = PER_communist_naval_designs }
		x = 1
		y = 1
		relative_position_id = PER_communist_naval_designs
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {

		}

		completion_reward = {
			effect_tooltip = {
				navy_experience = 25
				#IF = {
				#	limit = {
				#		has_dlc = "Man the Guns"
				#	}
				#	SOU = {
				#		IF = {
				#			limit = {
				#				has_tech = advanced_ship_hull_submarine
				#			}
				#			PREV = {
				#				set_technology = { advanced_ship_hull_submarine = 1 #}
				#			}
				#		}
				#		ELSE = {
				#			set_technology =  { improved_ship_hull_submarine = 1 }
				#		}
				#	}
				#}
				#ELSE = {
				#	SOU = {
				#		IF = {
				#			limit = {
				#				has_tech = advanced_submarine
				#			}
				#			PREV = {
				#				set_technology = { advanced_submarine = 1 }
				#			}
				#		}
				#		ELSE = {
				#			PREV = {
				#				set_technology = { improved_submarine = 1 }
				#			}
				#		}
				#	}
				#}
			}
			set_technology =  { basic_ship_hull_submarine = 1 }
		}
	}

	focus = { #COMMUNIST
		id = PER_iranian_socialism
		icon = GFX_focus_SWE_refuge_for_revolutionaries
		prerequisite = { focus = PER_iranian_socialist_revolution }
		prerequisite = { focus = PER_elevate_the_iran_party }
		x = -1
		y = 2
		relative_position_id = PER_elevate_the_iran_party
		cost = 5
		
		available = {
			has_civil_war = no
			has_government = communism
		}

		bypass = {
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {

			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			add_stability = 0.05
		}
	}

	focus = { #COMMUNIST
		id = PER_iranian_industrialization
		icon = GFX_focus_ARG_women_in_industry
		prerequisite = { focus = PER_iranian_socialism }
		x = 0
		y = 1
		relative_position_id = PER_iranian_socialism
		cost = 10
		available = {
			has_government = communism
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			
		every_state = {
			limit = {
				is_core_of = ROOT
				is_owned_and_controlled_by = ROOT
			}
			add_extra_state_shared_building_slots = 1
		}

		if = {
				limit = {
					267 = { #Kabul
						is_owned_and_controlled_by = ROOT
					}
				}
				267 = { set_state_category = large_town }
			}
		if = {
				limit = {
					413 = { #Kuz
						is_owned_and_controlled_by = ROOT
					}
				}
				413 = { set_state_category = large_town }
			}

			if = {
				limit = {
					415 = { #herat
						is_owned_and_controlled_by = ROOT
					}
				}
				415 = { set_state_category = large_town }
			}

		266 = { #Tehran
		set_state_category = metropolis 
		add_extra_state_shared_building_slots = 2
		add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
				}
			}	
		}
	}

	focus = { #COMMUNIST
		id = PER_international_solidarity
		icon = GFX_focus_ETH_freedom_at_gunpoint
		x = 8

		y = 0
		relative_position_id = PER_rally_the_reformers
		cost = 10
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			set_rule = { can_send_volunteers = yes }
			add_ideas = PER_aid_communists_cw
			
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_afghanistan_intervention
		icon = GFX_focus_PER_communist_afghanistan_intervention
		prerequisite = { focus = PER_international_solidarity }
		x = 0
		y = 1
		relative_position_id = PER_international_solidarity
		cost = 10
		will_lead_to_war_with = RAJ
		available = {
			OR = {
				threat > 0.20
				has_war = yes
			}
		}

		bypass = {
			RAJ = {
				OR = {
					exists = no
					is_subject_of = ROOT
				}
			}
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 5
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			create_wargoal = {
				target = RAJ
				type = puppet_wargoal_focus
			}
		}
	}



	focus = { #COMMUNIST
		id = PER_western_mountain_wall
		icon = GFX_focus_generic_befriend_kurdistan
		prerequisite = { focus = PER_international_solidarity }
		x = 3
		y = 1
		relative_position_id = PER_international_solidarity
		cost = 10
		available = {
			OR = {
				threat > 0.20
				has_war = yes
			}
		}
		bypass = {
		
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 5
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			create_wargoal = {
				target = ARM
				type = puppet_wargoal_focus
			}

			create_wargoal = {
				target = GEO
				type = puppet_wargoal_focus
			}

			create_wargoal = {
				target = DAG
				type = puppet_wargoal_focus
			}
		}
	}
	#focus = { #COMMUNIST
	#	id = PER_communist_kurdish_uprising
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_communist_destabilize_iraq }
	#	x = 1
	#	y = 1
	#	relative_position_id = PER_communist_destabilize_iraq
	#	cost = 10
	#	
	#	available = {
	#	}
	#	bypass = {
	#	}
	#	allow_branch = {
	#	}
	#	ai_will_do = {
	#		factor = 0
	#	}
	#	search_filters = {
	#	}
	#	completion_reward = {
	#		custom_effect_tooltip = "TODO: decisions to build up and trigger a CW in Iraq for #Kurdish independence. Need events for peacing out Iraq."
	#	}
	#}

	focus = { #COMMUNIST
		id = PER_consolidate_india
		icon = GFX_focus_focus_fra_revolution_utmost
		prerequisite = { focus = PER_western_mountain_wall }
		prerequisite = { focus = PER_communist_afghanistan_intervention }
		x = -1
		y = 2
		relative_position_id = PER_western_mountain_wall
		cost = 5
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
			has_war_with = ENG
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 2
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			add_timed_idea = {
			idea = PER_eng_war_bonus 
			days = 365
			}
			declare_war_on = {
				target = ENG
			}
		}
	}



	focus = { #COMMUNIST
		id = PER_communist_gulf_hegemony
		icon = GFX_focus_ETH_an_arabic_base
		prerequisite = { focus = PER_western_mountain_wall }
		prerequisite = { focus = PER_communist_afghanistan_intervention }
		x = 0
		y = 2
		relative_position_id = PER_communist_afghanistan_intervention
		cost = 10
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
		completion_reward = {
			#custom_effect_tooltip = "TODO: decisions or wargoals to take Saudia Arabia and Yemen. Defense bonus against major powers."
			custom_effect_tooltip = generic_ROOT_gains_wargoal_tt
			every_other_country = {
				limit = {
					capital_scope = {
						OR = {
							region = 28
							region = 196
							region = 238
							region = 236
							region = 237
							region = 291
						}
					}
					NOT = {
						OR = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
							is_subject_of = ROOT
						}
					}
				}
				hidden_effect = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = puppet_wargoal_focus
						}
					}
				}
			}
			add_ideas = PER_gulf_hegemony_idea
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_propaganda
		icon = GFX_focus_SWE_radiotjanst
		prerequisite = { focus = PER_iranian_socialism focus = PER_soviet_alignment }
		x = -2
		y = 2
		relative_position_id = PER_iranian_socialism
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_communist_propaganda_tt
			add_ideas = PER_iranian_radio_idea
			IF = {
				limit = { NOT = { has_tech = radio } }
				set_technology = { radio = 1 }
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_industrialization
		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = PER_iranian_socialism }
		x = 2
		y = 2
		relative_position_id = PER_iranian_socialism
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}



}